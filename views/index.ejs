<!DOCTYPE html>
<html>
<head>
    <title>ğŸ“š<%= pagetitle %></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css">
</head>
    <header>
        <a href="/test">ğŸ’»ãƒ†ã‚¹ãƒˆ</a>
        <a href="/test2">ãƒ†ã‚¹ãƒˆï¼’</a>
        <a href="/want">èª­ã¿ãŸã„ãŒ¿</a>
    </header>
<body>
    <h1 oncopy="alert('ã‚³ãƒ”ãƒ¼ä½¿ãˆãªã„ã‚ˆãƒ¼'); return false;">ğŸ“š èª­æ›¸é€²è¡Œåº¦</h1>
    <h2>ğŸ“–ç¾åœ¨<%= books.length %>å†Š</h2>
    <a href="/add">ï¼‹ ãŒ¿ã‚’è¿½åŠ ã™ã‚‹</a>
    <a href="/home">å…ƒã«æˆ»ã™â¡</a>
    <!--ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³æ¤œç´¢â€»ä½œè€…ã®åå‰ã¯å‡ºã›ãŸ-->
        <form method="POST" action="/author-select-books">
                <select name="author">
                        <!--<option>å…¨ã¦ã®è‘—è€…</option>-->
                        <option value="" disabled selected style="display:none;">é¸æŠã—ã¦ãã ã•ã„</option>
                    <% authors.forEach(authorObj => { %>
                        <option value="<%= authorObj.author %>"><%= authorObj.author %></option>
                    <% }); %>
                </select>
            <button type="submit">æ¤œç´¢</button>
        </form>

    <!--ç™»éŒ²ã—ãŸæœ¬ã‚’è¡¨ç¤º-->
    <ul>
        <% books.forEach(book => { %>
            <li 
            style="background-color: <%= book.color %>;" 
            id="list-<%= book.id %>"
            class="list">
                <small>æ›´æ–°æ—¥ <%= book.formatted_update_date %></small><br>
                <strong>
                    <%= book.title %>
                </strong> - <%= book.author %>ï¼ˆ<span id="currentpages"><%= book.current_pages%></span>/<%= book.total_pages %>ãƒšãƒ¼ã‚¸ï¼‰
                <!--é€²æ—ãƒ¡ãƒ¼ã‚¿ãƒ¼-->
                <meter class="pages" min="0" max="<%= book.total_pages %>" low="50" high="150" optimum="500" value="<%= book.current_pages%>"></meter><p class="progress"></p>

                
                <!--ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ãƒœã‚¿ãƒ³-->
                <div class="submit">
                    <!--ãƒšãƒ¼ã‚¸æ›´æ–°-->
                    <input type="number" name="currentPages"
                        min="0"
                        max="<%= book.total_pages %>"
                        value="0"
                        required>
                    <button class="action-btn"
                            data-action="/update"
                            data-id="<%= book.id %>"
                            data-current-pages="<%= book.current_pages %>">æ›´æ–°</button>
                
                    <div style="display:inline-flex">
                        
                    <!--å‰Šé™¤-->
                    <button type="button"
                            class="action-btn"
                            data-action="/delete"
                            data-id="<%= book.id %>"
                            data-title="<%= book.title %>">å‰Šé™¤</button>
                            
                    <!--èª­äº†-->
                    <button type="button"
                            class="action-btn comp"
                            data-action="/add_done"
                            data-id="<%= book.id %>"
                            data-title="<%= book.title %>"
                            data-author="<%= book.author %>"
                            data-total_pages="<%= book.total_pages %>"
                            value="1" disabled>èª­ã¿çµ‚ãˆãŸï¼</button>
                    </div>
                </div>    
            </li>
        <% }); %>
        <a href="/">æˆ»ã‚‹â†’</a>
    </ul>
    <script type="text/javascript" src="/js/indexscript.js"></script>
</body>
</html>